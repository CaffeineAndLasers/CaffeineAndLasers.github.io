<!DOCTYPE html><html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plant Monitor Prototype Update</title>
    <link href="../../Assets/favicon.ico" rel="icon" type="image/x-icon" />
  <link rel="stylesheet" href="/styles.css?nocache=1764220866826">
    <link rel="alternate" type="application/rss+xml" title="Caffeine and Lasers RSS Feed" href="/feed.xml">
    <!-- Canonical URL for SEO and sitemap -->
    <link rel="canonical" href="https://caffeineandlasers.com/blogs/20250124PlantMonitorPrototypeUpdate.html">
    <!-- Octothorpes: request indexing of this page on load -->
    <link rel="preload" as="fetch" href="https://octothorp.es/?uri=https://caffeineandlasers.com/blogs/20250124PlantMonitorPrototypeUpdate.html">
    <!-- Octothorpes: emit one link per tag on this page -->
    
      
        <link rel="octo:octothorpes" href="Technology">
      
        <link rel="octo:octothorpes" href="Projects">
      
    
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
    <meta name="color-scheme" content="dark light">
    <meta name="theme-color" content="#1e1e2e" media="(prefers-color-scheme: dark)">
    <meta name="theme-color" content="#eff1f5" media="(prefers-color-scheme: light)">
    <script>
      (function() {
        try {
          var stored = localStorage.getItem('cl-theme');
          var prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
          var theme = stored || (prefersLight ? 'theme-light' : 'theme-dark');
          document.documentElement.classList.add(theme);
        } catch (e) {}
      })();
    </script>
</head>

<div id="container"><div id="header"></div>
    <div id="headerArea">
    <nav id="navbar" style="margin-bottom: 0px;"><ul>
            <li><a href="/index.html">Home</a></li>
            <li><a href="/blog.html">Blog</a></li>
            <li><a href="/notes.html">Notes & Links</a></li>
            <li><a href="/Resources.html">Resources</a></li>
            <li><a href="/media.html">Media</a></li>
            <!-- This empty one feels immature -->
            <!-- <li><a href="/publications.html">Publications</a></li>  -->
            <!-- <li><a href="/Resume.html">Resume</a></li> -->
            <li><a href="/contact.html">Contact Me</a></li>
            
</ul></nav></div>


<div id="flex">

<aside id="leftSidebar"><h2>Updates</h2>
<div class="box">
    What am I doing these days!
    <ul>
        <li><b>April 2025</b> - Traveled to U.K to collaborate with Durham University</li>
        <li><b>April 2025</b> - Traveling to <a href="https://dlr.expert/coat2025/" target="_blank">COAT 2025</a> in Munich </li>
        <li><b>July 2024</b> - Started this website!</li>
        <li><b>July 2023</b> - Started my PhD</li>
    </ul>
</div>


<h2> Say Hello!</h2> 

<div >
    <img 
        src="\Assets\KappyIdle.png" 
        alt="Koffee Koala" 
        class="KappySidebar"
    />
</div>

<p></p>

<b>Sign my  <a href="https://caffeineandlasers.atabook.org/"> Guestbook </a>!</b>


<h2>Find Me Online</h2>
<ul>
    <li>
        <a href="https://aus.social/@AuntyRed/" target="_blank"
            >Mastodon</a
        >
    </li>
    <li>
        <a
            href="https://www.youtube.com/@CameronJones-dj8mml"
            target="_blank"
            >YouTube</a
        >
    </li>
    <li>
        <a
            href="https://www.linkedin.com/in/cameron-jones-sydney/"
            target="_blank"
            >LinkedIn</a
        >
    </li>
    <li>
        <a
            href="https://github.com/CJones-Optics/"
            target="_blank"
            >GitHub</a
        >
    </li>
</ul>
</aside>

<main>

 <h1 style="font-size:35px;">Plant Monitor Prototype Update</h1>

<div style="border: 1px solid #ccc; padding: 5px; margin-bottom: 10px;">
  <p><strong>Date:</strong> 2025-01-24</p>
  <p><strong>Last Updated:</strong> 2025-10-10</p>
</div>

<h1>My Wireless Plant Monitor! (Prototype)</h1>
<p>I just wanted to do a quick write-up on a side project I'm working on and share photos of an early prototype.</p>
<p><img src="/Assets/20240124Plant.png" alt=""></p>
<p><strong>What is it:</strong></p>
<ul>
<li>I am working on an IoT system to monitor my plants and let me know when they need water.</li>
</ul>
<p><strong>How does it work</strong><br>
<strong>Hardware</strong></p>
<ul>
<li>Raspberry Pi Pico W</li>
<li>Core Electronics Capacitive Soil Moisture Meter</li>
<li>Core Electronics Pico Timer</li>
<li>A couple of AA batteries<br>
<strong>Software:</strong></li>
<li>The firmware on the Pico is running MicroPython â€” a small-footprint port of Python designed to run on embedded devices.</li>
<li>It shoots messages to my main PC via MQTT.</li>
<li>My PC receives the messages via Mosquitto (MQTT broker) running locally.</li>
<li>It then stores the messages in a SQLite database.</li>
<li>A Python Flask app pulls out the data and displays it on a web dashboard.</li>
<li>(The web dashboard is hand-rolled HTML, CSS, and vanilla JS.)</li>
</ul>
<p><strong>Why not just...</strong><br>
Why not just buy something, use an existing framework, check my plants myself, do literally anything else with my time.</p>
<p>Because I wanted to build something myself, and see how it works.</p>
<h1>2 Requirements</h1>
<p>I wanted my device to have the following characteristics</p>
<ul>
<li>Communicate wirelessly.</li>
<li>Scalable
<ul>
<li>I have a few plants in a bunch of different places. This means I will need a number of sensors.</li>
<li>This implied several sub-requirements
<ul>
<li>Cost
<ul>
<li>The device should cost less than $30 AUD per unit.</li>
</ul>
</li>
<li>Software Scalability
<ul>
<li>The dashboard should scale to support up to 10 clients.</li>
</ul>
</li>
<li>Manufacturability
<ul>
<li>I should be able to assemble future units in less than 30 minutes per unit (not including 3D print time).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Power:
<ul>
<li>The device should last at least a month on a set of batteries.</li>
<li>The device should be powered by disposable alkaline batteries (this is personal preference for convenience, safety, and scalability).</li>
</ul>
</li>
</ul>
<h1>3 How I built it</h1>
<h2>3.1 Getting the electronics and sensors working</h2>
<p>The first step was to get the physical bits and bobs working and playing nicely together. I threw all the components on a breadboard, plugged the sensor into my microcontroller's ADC, wrote a basic script to print the reading to serial and shut down. Then I tested it on USB power, and then on battery power using the timer. Easy!</p>
<p><img src="/Assets/20240124PlantMonitorBreadboard.png" alt=""></p>
<h2>3.2 Soldering it all in place</h2>
<p>Once I was happy that the electronics worked, I found a leftover soldered breadboard from some previous work and soldered everything down. I also found an old three-pin connector, which was lucky â€” this meant I could swap out the sensor in case I broke it or something.</p>
<p><img src="/Assets/20240124PlantMonitorCircuitboard.png" alt=""></p>
<p><img src="/Assets/20240124Circuitboardback.png" alt=""></p>
<h2>3.3 Write the firmware</h2>
<p>Next up, I had to do a second pass at the firmware and get it actually doing what it was meant to. I got the device to:</p>
<ol>
<li>Connect to Wiâ€‘Fi.</li>
<li>Take five readings (and average them).</li>
<li>Scale the reading to a calibrated value.</li>
<li>Send it over Wiâ€‘Fi to the base.</li>
<li>Shut down.</li>
</ol>
<p><strong>Here is where I ran into problems:</strong> For some reason, there was a bug that showed up only when the USB was not plugged in. This was a nightmare to debug. Eventually I hooked up an extra OLED display over I2C just to print out debug statements.</p>
<p>Eventually I figured out the problem and was able to move on. For those curious: I had the device set to restart every 6 seconds. For reasons still unknown, the device could connect to the Wiâ€‘Fi and take its reading in this time on USB power, but it took longer than 6 seconds on battery power, so the restart signal would hit halfway through connecting to the Wiâ€‘Fi and everything would fail. Solution: restart on a one-minute cycle instead of 6 seconds.</p>
<ol start="4">
<li>3D print a case</li>
</ol>
<p>It isn't pretty, and I'm not sure it is waterproof, but here is the case for prototype 1.</p>
<p><img src="Assets/20240124FinalProduct.png" alt=""></p>
<h2>3.4 Write the server code</h2>
<p>Now comes the bit that I'm sure most people think is the easy part, but I find tedious. I needed to write the Python code to:</p>
<ol>
<li>Catch the incoming MQTT messages.</li>
<li>Chuck them into a database.</li>
<li>Start a web server.</li>
<li>Grab all the data from the database.</li>
<li>Make it look pretty.</li>
</ol>
<p>This is what I ended up with!</p>
<p><img src="/Assets/20240124PlantMonitorDashboard.png" alt=""></p>
<h1>4 Improvements for V2</h1>
<p>I am sharing the current state of the project, but I wouldn't recommend copying it <em>just</em> yet (at least without a lot of modification). Here is how I plan on improving V2</p>
<h2>4.1 Device housing and footprint design</h2>
<ul>
<li>The housing of the device is god-awful. It is way clunkier than the parts it is made of.</li>
<li>It isn't watertight (I just avoid hitting it when I water the plants).</li>
<li>The batteries aren't even enclosed.
<ul>
<li>The design of the case is a little funny: the switch and the battery replacement hatch are on opposite sides of the box, so I couldn't quite figure out how to enclose it and keep both accessible.</li>
</ul>
</li>
</ul>
<h2>4.2 Electronics</h2>
<ul>
<li>I plan on trying to see if I can reduce the power requirement to a pair of AA batteries, instead of three.</li>
<li>This will help reduce the footprint of the system</li>
</ul>
<h2>4.3 Server Code</h2>
<ul>
<li>At the moment the web page looks very ugly: the graph is reactive which is nice, but the scale on the x-axis isn't working properly and is evenly spacing each measurement regardless of measurement time.</li>
<li>This should be easy to fix, but it requires me to learn a bit more JavaScript.</li>
<li>I would like to deploy the whole thing inside a Docker container.</li>
</ul>
<h2>4.4 Documentation</h2>
<ul>
<li>Now that I have spotted the mistakes in V1 and know what improvements I want in V2,</li>
<li>Version 2 will be properly documented, including:
<ul>
<li>Bill of Materials (BOM)</li>
<li>Documented firmware and server software, including install instructions for the server</li>
<li>3D manufacturing files for the case (e.g., .stl, .3mf, as well as design files)</li>
<li>Photographed assembly instructions.</li>
</ul>
</li>
</ul>




<section class="post-tags" aria-label="Post tags">
  <h2 class="post-tags__heading">Tags</h2>
  <div class="post-tags__list">
    
    <a
      class="post-tag"
      href="https://octothorp.es/explore?o=Technology%2Ctechnology"
      target="_blank"
      rel="noopener noreferrer"
    >
      #Technology
    </a>
    
    <a
      class="post-tag"
      href="https://octothorp.es/explore?o=Projects%2Cprojects"
      target="_blank"
      rel="noopener noreferrer"
    >
      #Projects
    </a>
    
  </div>
</section>



<div id="c_widget"></div>
<script src="../../comment-widget/comment-widget.js"></script>
</main>

</div>
<footer id="footer">
    <div style="display: flex; justify-content: center; align-items: center; gap: 20px;">
        <a href="/FeedList.html">
            <img 
            src="/Assets/RSS_Logo.png" 
            alt="RSS Feed" 
            style="width: 20px; height: 20px" 
            />
        </a>
        <a href="https://octothorp.es" title="Octothorpes main ring">
            <img src="https://octothorp.es/badge.png" alt="Badge for the Octothorpes main ring" style="height: 20px" />
        </a>
        <span style="font-size: 0.8em;">
            <a href="/sitemap.xml">Sitemap</a>
        </span>
    </div>
</footer>

<script src="/scripts.js?nocache=1764220866826"></script>
<button id="theme-toggle" class="theme-toggle-fab" aria-pressed="false" aria-label="Toggle color theme" title="Toggle theme">ðŸŒ™ Dark</button>
</html>

